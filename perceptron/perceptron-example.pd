#N canvas 856 60 921 667 12;
#X declare -lib timbreIDLib;
#X obj 26 482 perceptron;
#X obj 26 334 bng 19 250 50 0 empty empty empty 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 61 427 r \$0-perceptron;
#X obj 739 23 declare -lib timbreIDLib;
#X obj 26 303 until;
#X text 101 393 <- input data for training and classification;
#X obj 93 506 route weights wbias error;
#N canvas 901 231 692 629 erro 0;
#X obj 382 64 array size \$0-erro;
#X obj 103 276 array set \$0-erro;
#X obj 140 154 f;
#X obj 100 128 t f b, f 6;
#X obj 141 177 + 1;
#X obj 184 199 mod 10;
#X floatatom 183 221 5 0 0 0 - - - 0;
#X msg 192 145 0;
#X obj 223 176 r epochs;
#X obj 382 41 r epochs;
#X obj 256 83 t f b;
#X msg 256 59 0;
#X obj 256 35 r reset;
#X obj 336 199 until;
#X obj 382 169 r epochs;
#X obj 419 311 text define \$0-erro;
#X msg 420 236 clear;
#X msg 484 256 write erro.txt;
#X obj 124 355 text set \$0-erro;
#X obj 100 98 inlet;
#X obj 336 137 r reset-master;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 3 0 18 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 2 1;
#X connect 5 0 1 1;
#X connect 5 0 18 1;
#X connect 7 0 2 1;
#X connect 8 0 5 1;
#X connect 9 0 0 0;
#X connect 10 0 1 0;
#X connect 10 1 2 0;
#X connect 11 0 10 0;
#X connect 12 0 11 0;
#X connect 13 0 11 0;
#X connect 14 0 13 0;
#X connect 16 0 15 0;
#X connect 17 0 15 0;
#X connect 19 0 3 0;
#X connect 20 0 13 0;
#X restore 207 528 pd erro;
#N canvas 526 262 450 278 (subpatch) 0;
#X array \$0-erro 100 float 0;
#X coords 0 5 99 -1 350 150 1 0 0;
#X restore 375 193 graph;
#X msg 26 268 100;
#X obj 93 528 print w;
#X obj 150 528 print b;
#N canvas 379 161 825 823 dataset 0;
#X obj 63 366 text get \$0-dataset;
#X obj 62 180 until;
#X obj 62 218 f;
#X obj 151 231 + 1;
#X obj 148 196 sel 0;
#X obj 63 332 t f b;
#X obj 62 151 t b b;
#X obj 62 129 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 199 241 text size \$0-dataset;
#X obj 63 390 outlet;
#X obj 62 104 inlet;
#X obj 153 269 mod, f 7;
#X obj 234 296 s datasize;
#X msg 107 194 0;
#X obj 518 378 text define \$0-dataset;
#X obj 484 148 openpanel;
#X obj 484 173 t a b;
#X obj 484 202 pack s f;
#X msg 484 229 read \$1;
#X obj 451 104 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 452 126 t b b;
#X obj 326 55 r read-text;
#X obj 326 79 t b a;
#X obj 637 204 t a b;
#X obj 637 233 pack s f;
#X obj 637 131 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 637 260 write \$1;
#X obj 637 179 savepanel;
#X msg 637 154 dir;
#X obj 559 349 r clear-text;
#X obj 451 82 r load;
#X obj 637 107 r save;
#X floatatom 192 322 5 0 0 0 - - - 0;
#X obj 233 270 print size;
#X obj 199 190 r bang-datasize;
#X obj 484 285 t b a;
#X obj 383 498 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 338 345 loadbang;
#X msg 383 517 read data/dataset.txt;
#X obj 338 573 print loaded;
#X msg 338 550 training dataset;
#X msg 398 390 clear;
#X obj 338 367 t b b b b;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 5 0;
#X connect 3 0 11 0;
#X connect 4 0 1 1;
#X connect 5 0 0 0;
#X connect 6 0 1 0;
#X connect 7 0 6 0;
#X connect 8 0 11 1;
#X connect 8 0 12 0;
#X connect 8 0 33 0;
#X connect 10 0 7 0;
#X connect 11 0 2 1;
#X connect 11 0 4 0;
#X connect 11 0 32 0;
#X connect 13 0 2 1;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 35 0;
#X connect 19 0 20 0;
#X connect 20 1 15 0;
#X connect 21 0 22 0;
#X connect 22 0 8 0;
#X connect 22 1 14 0;
#X connect 23 0 24 0;
#X connect 24 0 26 0;
#X connect 25 0 28 0;
#X connect 26 0 14 0;
#X connect 27 0 23 0;
#X connect 28 0 27 0;
#X connect 29 0 14 0;
#X connect 30 0 19 0;
#X connect 31 0 25 0;
#X connect 34 0 8 0;
#X connect 35 0 8 0;
#X connect 35 1 14 0;
#X connect 36 0 38 0;
#X connect 37 0 42 0;
#X connect 38 0 14 0;
#X connect 40 0 39 0;
#X connect 41 0 14 0;
#X connect 42 0 40 0;
#X connect 42 1 8 0;
#X connect 42 2 36 0;
#X connect 42 3 41 0;
#X restore 26 392 pd dataset;
#N canvas 352 88 1682 953 hiperparameters 0;
#X msg 1048 269 zero;
#X msg 1074 303 reset;
#X obj 924 604 s \$0-perceptron;
#X msg 1093 336 print;
#X msg 961 198 epochs \$1;
#X obj 967 172 s epochs;
#X msg 1051 227 learning \$1;
#X msg 914 121 training \$1;
#X msg 1052 159 regression \$1;
#X floatatom 189 223 7 0 0 2 epochs - - 0;
#X floatatom 114 223 7 0 0 2 learning - - 0;
#X floatatom 346 223 7 0 0 2 threshold - - 0;
#X floatatom 266 223 7 0 0 2 weights - - 0;
#X obj 101 183 cnv 2 345 2 empty empty TRAINING\ HIPERPARAMETERS 0 12 0 12 #606060 #606060 0;
#X obj 100 101 cnv 2 345 2 empty empty HIPERPARAMETERS 5 10 0 14 #606060 #000000 0;
#X obj 100 119 cnv 2 345 2 empty empty SETUP 0 10 0 12 #606060 #606060 0;
#X obj 105 158 tgl 19 0 training-data empty trainig 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 175 159 tgl 19 0 empty empty regression 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 333 159 bng 19 250 50 0 empty empty reset 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 270 159 bng 19 250 50 0 empty empty print\  0 -10 0 12 #00ff04 #000000 #000000;
#X obj 393 159 bng 19 250 50 0 empty empty zero 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 1298 93 bng 19 250 50 0 empty empty train 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 100 247 cnv 2 345 2 empty empty empty 0 12 0 12 #606060 #404040 0;
#X msg 1300 487 bias 1;
#X msg 1418 543 datasize \$1;
#X obj 1418 522 r datasize;
#X obj 1261 390 loadbang;
#X obj 1261 414 t b b b b;
#X obj 1301 622 s \$0-perceptron;
#X msg 1194 479 0.5;
#X msg 1191 507 3;
#X msg 1169 334 weights \$1;
#X msg 1176 576 100;
#X msg 1174 425 0.01;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 6 0 2 0;
#X connect 7 0 2 0;
#X connect 8 0 2 0;
#X connect 9 0 4 0;
#X connect 9 0 5 0;
#X connect 10 0 6 0;
#X connect 12 0 31 0;
#X connect 16 0 7 0;
#X connect 17 0 8 0;
#X connect 18 0 1 0;
#X connect 18 0 9 0;
#X connect 19 0 3 0;
#X connect 20 0 0 0;
#X connect 23 0 28 0;
#X connect 24 0 28 0;
#X connect 25 0 24 0;
#X connect 26 0 27 0;
#X connect 27 0 33 0;
#X connect 27 0 32 0;
#X connect 27 1 29 0;
#X connect 27 2 23 0;
#X connect 27 3 30 0;
#X connect 29 0 11 0;
#X connect 30 0 12 0;
#X connect 31 0 2 0;
#X connect 32 0 9 0;
#X connect 33 0 10 0;
#X coords 0 -1 1 1 347 150 2 100 100;
#X restore 371 23 pd hiperparameters;
#N canvas 1203 110 1036 755 sound_file 0;
#X obj 108 159 bng 19 250 50 0 empty empty loud_training_audio -5 -9 0 12 #00ff04 #000000 #000000;
#X obj 108 225 bng 19 250 50 0 empty empty load\ analysis 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 225 225 bng 19 250 50 0 empty empty save\ analysis 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 343 226 bng 19 250 50 0 empty empty clear\ analysis 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 101 317 cnv 2 345 2 empty empty empty 20 12 0 14 #606060 #404040 0;
#X obj 101 102 cnv 2 345 2 empty empty AUDIO\ DATASET 5 10 0 14 #202020 #000000 0;
#X obj 101 120 cnv 2 345 2 empty empty LOAD\ AND\ ANALYZE\ AUDIO\ TRAINING 0 12 0 12 #606060 #404040 0;
#X obj 100 183 cnv 2 345 2 empty empty LOAD\ PRE-ANALYZED\ FILE 0 12 0 12 #606060 #404040 0;
#X obj 247 159 bng 19 250 50 0 empty empty play\ and\ analyze 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 100 249 cnv 2 345 2 empty empty LOAD\ AND\ PLAY\ CLASSIFICATION\ AUDIO 0 12 0 12 #606060 #404040 0;
#X obj 108 292 bng 19 250 50 0 empty empty load\ classification\ audio 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 297 292 bng 19 250 50 0 empty empty play\ to\ classify 0 -10 0 12 #00ff04 #000000 #000000;
#N canvas 1133 171 1369 993 real-time-analysis 0;
#N canvas 339 182 793 521 live-onset 0;
#X obj 191 244 bark~ 1024 64 1;
#X msg 425 115 mask 4 0.75;
#X msg 435 191 filter_range 0 20;
#X obj 353 34 loadbang;
#X obj 191 267 outlet;
#X msg 437 231 minvel 2;
#X obj 529 85 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 529 105 loudness \$1;
#X obj 633 86 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 633 106 filter_avg \$1;
#X msg 412 72 thresh -1 6.5;
#X obj 188 72 r~ sig1;
#X msg 430 151 debounce 300;
#X obj 269 73 r~ sig2;
#X connect 0 0 4 0;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 3 0 10 0;
#X connect 3 0 12 0;
#X connect 3 0 2 0;
#X connect 3 0 1 0;
#X connect 3 0 5 0;
#X connect 3 0 6 0;
#X connect 3 0 8 0;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 10 0 0 0;
#X connect 11 0 0 0;
#X connect 12 0 0 0;
#X connect 13 0 0 0;
#X restore 763 116 pd live-onset;
#X obj 228 263 barkSpecKurtosis~ 1024 0.5;
#X obj 764 262 barkSpecSpread~ 1024 0.5;
#X obj 228 333 pack f f f, f 77;
#X obj 228 289 * 0.1;
#X obj 764 288 * 0.1;
#X obj 228 127 r~ sig1;
#X obj 497 261 barkSpecSlope~ 1024 0.5;
#X obj 330 552 f;
#X obj 411 561 + 1;
#X obj 400 534 sel 0;
#X msg 352 526 0;
#X obj 228 899 print analisys;
#X obj 228 506 t l b, f 15;
#X obj 400 598 mod 21;
#X obj 351 504 loadbang;
#X obj 286 691 sel 11;
#X msg 286 718 1;
#X obj 238 690 sel 1;
#X msg 238 714 0;
#X obj 228 814 list append 0;
#X obj 287 870 text set \$0-dataset;
#X obj 228 413 spigot;
#X obj 267 363 r training-data;
#X obj 329 389 == 0;
#X obj 290 415 spigot;
#X obj 367 659 s bang-datasize;
#X obj 498 124 r~ sig2;
#X obj 289 466 s \$0-perceptron;
#X obj 290 441 list append 0;
#X obj 367 637 sel 20;
#X floatatom 480 408 5 0 0 0 - - - 0;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 7 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 22 0;
#X connect 3 0 25 0;
#X connect 4 0 3 0;
#X connect 5 0 3 2;
#X connect 6 0 1 0;
#X connect 6 0 2 0;
#X connect 6 0 7 0;
#X connect 7 0 3 1;
#X connect 8 0 9 0;
#X connect 8 0 18 0;
#X connect 8 0 16 0;
#X connect 8 0 21 1;
#X connect 8 0 30 0;
#X connect 9 0 14 0;
#X connect 10 0 11 0;
#X connect 11 0 8 0;
#X connect 13 0 20 0;
#X connect 13 1 8 0;
#X connect 14 0 8 1;
#X connect 14 0 10 0;
#X connect 15 0 11 0;
#X connect 16 0 17 0;
#X connect 17 0 20 1;
#X connect 18 0 19 0;
#X connect 19 0 20 1;
#X connect 20 0 12 0;
#X connect 20 0 21 0;
#X connect 22 0 13 0;
#X connect 23 0 22 1;
#X connect 23 0 24 0;
#X connect 23 0 31 0;
#X connect 24 0 25 1;
#X connect 25 0 29 0;
#X connect 27 0 1 0;
#X connect 27 0 7 0;
#X connect 27 0 2 0;
#X connect 29 0 28 0;
#X connect 30 0 26 0;
#X restore 508 357 pd real-time-analysis;
#X obj 507 177 openpanel;
#N canvas 700 507 756 356 sound 0;
#X obj 51 119 soundfiler;
#X obj 51 40 t a b;
#X obj 51 16 inlet;
#X obj 51 69 pack s f \$0;
#X floatatom 198 162 15 0 0 1 samples - - 0;
#X obj 198 185 / 44100;
#X floatatom 199 207 15 0 0 1 segundos - - 0;
#X msg 51 96 read -resize \$1 \$3-sound1;
#X obj 49 171 table \$0-sound1;
#X obj 406 74 f \$0;
#X obj 406 55 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 374 10 loadbang;
#X msg 406 96 read -resize audio/ago_berim_train.wav \$1-sound1;
#X obj 374 32 t b b;
#X obj 375 307 print loaded;
#X msg 376 284 training audio;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 7 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 0 0;
#X connect 9 0 12 0;
#X connect 10 0 9 0;
#X connect 11 0 13 0;
#X connect 12 0 0 0;
#X connect 13 0 15 0;
#X connect 13 1 10 0;
#X connect 15 0 14 0;
#X restore 507 198 pd sound;
#X msg 507 223 stop;
#X msg 549 222 bang;
#X obj 507 155 bng 19 250 50 0 empty empty loud_sound_file 20 9 0 12 #00ff04 #000000 #000000;
#X obj 507 248 tabplay~ \$0-sound1;
#X obj 631 315 dac~;
#X obj 507 290 s~ sig1;
#X text 502 110 1 - carregar um arquivo de áudio, f 19;
#X text 831 187 2 - tocar o arquivo e salvar a aanálise em um arquivo de texto, f 17;
#X obj 730 183 openpanel;
#N canvas 406 439 854 447 sound 0;
#X obj 51 119 soundfiler;
#X obj 51 40 t a b;
#X obj 51 16 inlet;
#X obj 51 69 pack s f \$0;
#X floatatom 198 162 15 0 0 1 samples - - 0;
#X obj 198 185 / 44100;
#X floatatom 199 207 15 0 0 1 segundos - - 0;
#X msg 51 96 read -resize \$1 \$3-sound2;
#X obj 49 171 table \$0-sound2;
#X obj 444 59 f \$0;
#X obj 444 41 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 414 -4 loadbang;
#X msg 444 81 read -resize audio/ago_berim_class.wav \$1-sound2;
#X obj 414 255 print loaded;
#X obj 414 20 t b b;
#X msg 415 232 classification audio;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 7 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 0 0;
#X connect 9 0 12 0;
#X connect 10 0 9 0;
#X connect 11 0 14 0;
#X connect 12 0 0 0;
#X connect 14 0 15 0;
#X connect 14 1 10 0;
#X connect 15 0 13 0;
#X restore 730 204 pd sound;
#X obj 730 161 bng 19 250 50 0 empty empty loud_sound_file 20 9 0 12 #00ff04 #000000 #000000;
#X obj 730 250 tabplay~ \$0-sound2;
#X msg 730 227 stop;
#X msg 772 226 bang;
#X obj 729 289 s~ sig2;
#X msg 355 509 clear;
#X obj 355 531 s clear-text;
#X obj 111 574 s load;
#X obj 241 537 s save;
#X obj 384 159 bng 19 250 50 0 empty empty stop 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 414 292 bng 19 250 50 0 empty empty stop 0 -10 0 12 #00ff04 #000000 #000000;
#X obj 111 490 t b b;
#X obj 143 549 s clear-text;
#X obj 519 13 t b b;
#X msg 551 36 1;
#X obj 551 59 s training-data;
#X msg 143 515 clear;
#X msg 535 460 1;
#X obj 535 483 s training-data;
#X obj 503 434 t b b;
#X connect 0 0 38 0;
#X connect 1 0 36 0;
#X connect 2 0 33 0;
#X connect 3 0 30 0;
#X connect 8 0 44 0;
#X connect 10 0 25 0;
#X connect 11 0 28 0;
#X connect 13 0 14 0;
#X connect 15 0 18 0;
#X connect 16 0 18 0;
#X connect 17 0 13 0;
#X connect 18 0 19 0;
#X connect 18 0 19 1;
#X connect 18 0 20 0;
#X connect 23 0 24 0;
#X connect 25 0 23 0;
#X connect 26 0 19 0;
#X connect 26 0 19 1;
#X connect 26 0 29 0;
#X connect 27 0 26 0;
#X connect 28 0 26 0;
#X connect 30 0 31 0;
#X connect 34 0 15 0;
#X connect 35 0 27 0;
#X connect 36 0 32 0;
#X connect 36 1 41 0;
#X connect 38 0 17 0;
#X connect 38 1 39 0;
#X connect 39 0 40 0;
#X connect 41 0 37 0;
#X connect 42 0 43 0;
#X connect 44 0 16 0;
#X connect 44 1 42 0;
#X coords 0 -1 1 1 345 220 2 100 100;
#X restore 16 22 pd sound_file;
#X text 62 269 <- bang to training (100 epochs);
#X text 326 270 errors;
#X text 502 347 training epochs;
#N canvas 1222 126 946 765 classification 0;
#X obj 100 101 cnv 2 350 2 empty empty CLASSIFICATION/REGRESSION 5 12 0 14 #606060 #404040 0;
#X floatatom 108 145 7 0 0 2 output - - 0;
#X text 361 116 0 = agogo;
#X text 361 136 1 = berimbau;
#X text 234 124 for this example:;
#X obj 100 167 cnv 2 350 2 empty empty empty 0 12 0 12 #606060 #404040 0;
#X obj 53 47 inlet;
#X floatatom 533 226 5 0 0 1 classification - - 0;
#X text 526 305 0 = agogo;
#X text 526 325 1 = berimbau;
#X msg 533 279 agogô;
#N canvas 294 104 697 646 class 0;
#X obj 277 271 outlet;
#X obj 281 112 inlet;
#X obj 281 135 sel 0 1;
#X msg 371 213 set berimbau;
#X msg 279 211 set agogô;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 3 0 0 0;
#X connect 4 0 0 0;
#X restore 533 256 pd class;
#X listbox 170 145 10 0 0 2 class - - 0;
#X connect 6 0 1 0;
#X connect 6 0 7 0;
#X connect 7 0 11 0;
#X connect 11 0 10 0;
#X connect 11 0 12 0;
#X coords 0 -1 1 1 350 70 2 100 100;
#X restore 26 580 pd classification;
#N canvas 1135 357 485 424 README 1;
#X text 53 304 2 - setup the hiperparameters and train the perceptron, f 34;
#X text 53 336 3 -load and play a classification audio file;
#X text 53 355 4 - classification or linear regression;
#X text 52 249 steps:;
#X text 52 273 1 - load an audio file and analyze \, or load a pre-analyzed text file.;
#X text 49 24 Introduction;
#X text 49 47 This patch provides a possible simple application of the [perceptron]. It works by loading an audio file containing 10 sound examples of agogô and 10 of the berimbau (with different modes of attack and articulations) and extracting three features (kurtosis \, slope \, and spread of bark spectrum) \, that will be the training dataset. Thus \, the analysis will be sent to train the [perceptron]. After the training process \, load a classification audio file with agogô and Berimbau examples that are not known by the [perceptron] and perform binary classification or linear regression tasks. All the default files of this example are loaded when the patch is open \, but you can try with your own audio files.;
#X restore 740 48 pd README;
#X connect 0 0 18 0;
#X connect 0 1 6 0;
#X connect 1 0 12 0;
#X connect 2 0 0 0;
#X connect 4 0 1 0;
#X connect 6 0 10 0;
#X connect 6 1 11 0;
#X connect 6 2 7 0;
#X connect 9 0 4 0;
#X connect 12 0 0 0;
